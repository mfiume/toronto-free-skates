<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toronto Free Skates</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚õ∏Ô∏è</text></svg>">
</head>
<body>
    <div id="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Toronto Free Skates</h1>
                <button class="sidebar-close" id="sidebarClose">Done</button>
            </div>

            <!-- Location -->
            <div class="sidebar-section">
                <div class="section-label">Location</div>
                <div class="location-status" id="locationStatus">
                    <span class="location-icon">üìç</span>
                    <span id="locationText">Detecting location...</span>
                </div>
                <div class="address-input-container" id="addressContainer" style="display: none;">
                    <input type="text" id="addressInput" placeholder="Enter address or postal code..." autocomplete="off">
                    <div id="addressSuggestions" class="suggestions-dropdown"></div>
                </div>
                <button class="btn btn-small" id="useAddressBtn">Use Address Instead</button>
            </div>

            <!-- Distance -->
            <div class="sidebar-section">
                <div class="section-label">Distance</div>
                <div class="distance-control">
                    <input type="range" id="distanceSlider" min="1" max="50" value="10">
                    <span id="distanceValue">10 km</span>
                </div>
                <label class="checkbox-label">
                    <input type="checkbox" id="anyDistance"> Any distance
                </label>
            </div>

            <!-- Date -->
            <div class="sidebar-section">
                <div class="section-label">Date</div>
                <div class="filter-buttons" id="dateFilterControl">
                    <button class="filter-btn active" data-value="any">Any</button>
                    <button class="filter-btn" data-value="today">Today</button>
                    <button class="filter-btn" data-value="tomorrow">Tomorrow</button>
                    <button class="filter-btn" data-value="pick">Pick</button>
                </div>
                <div id="datePickerContainer" style="display: none; margin-top: 8px;">
                    <input type="date" id="datePicker" class="date-picker-visible">
                </div>
            </div>

            <!-- Time of Day -->
            <div class="sidebar-section">
                <div class="section-label">Time of Day</div>
                <div class="filter-buttons" id="timeOfDayControl">
                    <button class="filter-btn active" data-value="all">All</button>
                    <button class="filter-btn" data-value="morning">Morning</button>
                    <button class="filter-btn" data-value="afternoon">Afternoon</button>
                    <button class="filter-btn" data-value="evening">Evening</button>
                </div>
            </div>

            <!-- Rink Type -->
            <div class="sidebar-section">
                <div class="section-label">Rink Type</div>
                <div class="filter-buttons" id="rinkTypeControl">
                    <button class="filter-btn active" data-value="">All</button>
                    <button class="filter-btn" data-value="Indoor">Indoor</button>
                    <button class="filter-btn" data-value="Outdoor">Outdoor</button>
                </div>
            </div>

            <!-- Sessions -->
            <div class="sidebar-section">
                <div class="section-label">Sessions</div>
                <div class="filter-buttons" id="timeFilterControl">
                    <button class="filter-btn active" data-value="upcoming">Upcoming</button>
                    <button class="filter-btn" data-value="all">All</button>
                    <button class="filter-btn" data-value="past">Past</button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- View Tabs -->
            <div class="content-header">
                <button class="filter-toggle" id="filterToggle">Filters</button>
                <div class="view-tabs">
                    <button class="tab active" data-view="list">List</button>
                    <button class="tab" data-view="map">Map</button>
                </div>
            </div>

            <!-- List View -->
            <div id="listView" class="view active">
                <div class="sort-bar">
                    <div class="sort-buttons" id="listSort">
                        <button class="sort-btn active" data-value="time">Time</button>
                        <button class="sort-btn" data-value="name">Name</button>
                        <button class="sort-btn" data-value="distance">Distance</button>
                    </div>
                    <input type="text" id="listSearch" placeholder="Search rinks...">
                </div>
                <!-- Loading Indicator -->
                <div id="loadingIndicator" class="loading">
                    <div class="spinner"></div>
                    <p>Loading skating sessions...</p>
                </div>
                <div id="listSessions" class="sessions-list"></div>
            </div>

            <!-- Map View -->
            <div id="mapView" class="view">
                <div id="map"></div>
                <div id="mapSidebar" class="map-sidebar">
                    <h3 id="mapSidebarTitle">Select a rink</h3>
                    <div id="mapSidebarContent"></div>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">üîç</div>
                <h3>No skating sessions found</h3>
                <p id="emptyMessage">Try adjusting your filters or expanding your search distance.</p>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/api.js"></script>
    <script src="js/location.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/views.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
